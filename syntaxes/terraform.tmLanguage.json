{
  "name": "terraform",
  "patterns": [
    {
      "begin": "#|//",
      "comment": "Line Comments",
      "end": "$\\n?",
      "name": "comment.line.number-sign.terraform"
    },
    {
      "begin": "/\\*",
      "comment": "Block Comments",
      "end": "\\*/",
      "name": "comment.block.documentation.terraform"
    },
    {
      "comment": "Language constants (true, false, yes, no, on, off)",
      "match": "\\b(true|false|yes|no|on|off)\\b",
      "name": "constant.language.terraform"
    },
    {
      "comment": "Primitive types",
      "match": "\\b(string|number|bool)\\b",
      "name": "support.type.primitive.terraform"
    },
    {
      "comment": "Numbers",
      "match": "\\b([0-9]+)\\b",
      "name": "constant.numeric.terraform"
    },
    {
      "match": "^\\s*}",
      "name": "punctuation.definition.tag.terraform"
    },
    {
      "match": "(resource|data)\\s+(\")?(\\w+)(\")?\\s+(\")?([\\w\\-]+)(\")?\\s+({)",
      "name": "meta.block.terraform",
      "captures": {
        "1": {
          "name": "keyword.terraform"
        },
        "2": { 
          "name": "string.terraform punctuation.definition.string.begin.terraform"
        },
        "3": {
          "name": "string.quoted.terraform meta.resource.terraform"
        },
        "4": {
          "name": "string.terraform punctuation.definition.string.end.terraform"
        },
        "5": { 
          "name": "string.terraform punctuation.definition.string.begin.terraform"
        },
        "6": { 
          "name": "string.quoted.terraform"
        },
        "7": { 
          "name": "string.terraform punctuation.definition.string.end.terraform"
        },
        "8": {
          "name": "punctuation.definition.tag.terraform"
        }
      }
    },
    {
      "match": "(provider|provisioner|variable|output|module|atlas)\\s+(\")?([\\w\\-]+)(\")?\\s+({)",
      "captures": {
        "1": {
          "name": "storage.type.function.terraform"
        },
        "2": {
          "name": "string.terraform punctuation.definition.string.begin.terraform"
        },
        "3": {
          "name": "string.quoted.terraform"
        },
        "4": {
          "name": "string.terraform punctuation.definition.string.end.terraform"
        },
        "5": {
          "name": "punctuation.definition.tag.terraform"
        }
      }
    },
    {
      "captures": {
        "1": {
          "name": "support.variable.terraform"
        },
        "2": {
          "name": "keyword.operator.arithmetic.terraform"
        }
      },
      "comment": "Highlight variables on the left side of equal sign",
      "match": "([\\w-]+)\\s*(=)\\s*"
    },
    {
      "include": "#string"
    },
    {
      "include": "#interpolation"
    }
  ],
  "repository": {
    "string": {
      "begin": "\\\"",
      "end": "\\\"",
      "beginCaptures": {
        "0": {
          "name": "string.terraform punctuation.definition.string.begin.terraform"
        }
      },
      "endCaptures": {
        "0": {
          "name": "string.terraform punctuation.definition.string.end.terraform"
        }
      },
      "patterns": [
        {
          "include": "#interpolation"
        },
        {
          "match": "([\\w\\-\\._]+)",
          "name": "string.quoted.double.terraform"
        }
      ]
    },
    "interpolation": {
      "begin": "\\$\\{",
      "end": "\\}",
      "beginCaptures": {
        "0": { "name": "punctuation.paren.open entity.tag.embedded.start.terraform" }
      },
      "endCaptures": {
        "0": { "name": "punctuation.paren.close entity.tag.embedded.end.terraform" }
      },
      "name": "interpolation.terraform",
      "patterns": [
        {
          "include": "$self"
        },
        {
          "captures": {
            "0": {
              "name": "keyword.control.period.terraform"
            }
          },
          "match": "(\\.)"
        },
        {
          "captures": {
            "0": {
              "name": "support.variable.terraform"
            }
          },
          "match": "([\\w-]+)"
        }
      ]
    }
  },
  "scopeName": "source.terraform"
}